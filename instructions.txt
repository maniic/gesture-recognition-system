====================================
HAND RECOGNITION SYSTEM INSTRUCTIONS
====================================

This document provides step-by-step instructions for setting up and running the hand recognition system.

**System Verification Status: COMPLETE**
- ✅ Multiple hand tracking working correctly (left/right hands)
- ✅ Kalman filter functionality verified for both hands
- ✅ Gesture recognition working for all 15 defined gestures 
- ✅ Visualization system supporting multiple hands
- ✅ All components tested and functioning properly
- ✅ All required dependencies installed and verified

**Recent Improvements (March 14, 2025)**
- ✅ FIXED: Left/right hand detection now correctly matches the user's perspective 
- ✅ IMPROVED: Gesture recognition algorithm uses confidence scoring for better accuracy
- ✅ ENHANCED: Better detection of thumb and finger positions in various orientations
- ✅ UPDATED: More robust detection of extended fingers with angle-based measurements
- ✅ ADJUSTED: Reduced color opacity to 60% for more pleasant visualization
- ✅ CORRECTED: "Four Fingers" gesture now means all five fingers extended, while "Open Hand" means all fingers except thumb

=====================
1. SYSTEM REQUIREMENTS
=====================

- Python 3.7+ (Tested with Python 3.12.4)
- Webcam with proper drivers installed
- Administrator privileges (for installing packages)
- Sufficient free space (approximately 500MB for all dependencies)
- For best performance: Multicore CPU recommended

====================
2. INSTALLATION STEPS
====================

1. Ensure Python is installed:
   - Download and install Python from https://www.python.org/downloads/
   - Make sure to check "Add Python to PATH" during installation
   - Verify installation by opening Command Prompt and typing:
     python --version

2. Install required packages:
   - Open Command Prompt or PowerShell
   - Navigate to the project directory with:
     cd path\to\hand-recognition
   - Install all dependencies with:
     pip install -r requirements.txt
   - If you encounter any issues, try installing packages individually:
     pip install opencv-python==4.8.1
     pip install mediapipe==0.10.7
     pip install numpy==1.26.0
     pip install matplotlib==3.8.0

3. Verify installation:
   - Run the verification script:
     python verify_installation.py
   - Ensure all packages show as successfully installed
   - If you see any errors, refer to the troubleshooting section

====================
3. RUNNING THE SYSTEM
====================

A. Basic Usage:
--------------
1. Make sure your webcam is connected and not being used by another application
2. Open Command Prompt or PowerShell
3. Navigate to the project directory:
   cd path\to\hand-recognition
4. Run the main program:
   python main.py
5. A window will open showing your webcam feed with hand tracking
6. Try different hand gestures to see them recognized in real-time
7. To quit the program, press 'q' while the window is active

B. Advanced Usage Options:
------------------------
1. For real-time visualization plots:
   python main.py --visualize

2. To save the visualization plots when exiting:
   python main.py --visualize --save-plot

3. To use a different camera (if you have multiple cameras):
   python main.py --camera 1
   (Replace 1 with the index of your desired camera)

4. To test the Kalman filter separately:
   python test_kalman.py

5. To test multiple Kalman filter parameters:
   python test_kalman.py --multi

6. To test two-hand tracking with the Kalman filter:
   python test_kalman.py --two-hands

====================
4. SYSTEM FEATURES
====================

A. Multiple Hand Support:
-----------------------
- The system now tracks and recognizes gestures from both hands simultaneously
- Each hand is distinctly identified as either left or right
- Left hand is tracked with red/green colors (raw/filtered) at 60% opacity
- Right hand is tracked with blue/yellow colors (raw/filtered) at 60% opacity
- Gesture information is displayed separately for each hand at the appropriate side of the screen

B. Improved Gesture Recognition:
------------------------------
- Accurate recognition for all common gestures
- Support for different hand orientations (palm facing camera, sideways, upside-down)
- Robust finger extension detection with angle calculations
- Detailed gesture labeling for unrecognized poses
- Detection works at various distances from the camera
- Fixed gesture recognition for "Four Fingers" (all five fingers extended) and "Open Hand" (all except thumb)

C. Enhanced Visualization:
------------------------
- Separate visualizations for left and right hands
- Color-coded trails for each hand showing movement history (with 60% opacity for better visibility)
- Improved layout for displaying multiple hands' data
- Real-time position data with raw vs. filtered comparison
- FPS counter to monitor performance

D. Data Fusion with Kalman Filter:
--------------------------------
- Separate Kalman filters for each hand
- Reduces jitter and improves tracking stability
- Predicts hand position based on previous movement
- Smoothes tracking even with rapid hand movements
- Configurable noise parameters for different environments

====================
5. PERFORMANCE TIPS
====================

For optimal performance:
- Ensure good lighting conditions for better hand detection
- Position hands approximately 1-2 feet from the camera
- Keep the background relatively simple
- Close other resource-intensive applications
- For multi-hand tracking, ensure both hands are clearly visible
- Position hands with clear separation for best results
- If using visualization, ensure your system can handle the additional processing

====================
6. TROUBLESHOOTING
====================

Issue: "Camera not found" or similar error
Solution: 
- Make sure your webcam is properly connected
- Ensure no other applications are using the camera (close video conferencing apps)
- Try a different camera index with --camera option
- Check if webcam drivers are installed and up-to-date
- Try rebooting your computer and reconnecting the webcam

Issue: ImportError for any package
Solution:
- Reinstall the specific package:
  pip install [package_name] --force-reinstall
- Verify Python version is compatible (Python 3.7+ required)
- Try installing a specific version:
  pip install mediapipe==0.10.7
- If using a virtual environment, ensure it's activated

Issue: Low performance or lag
Solution:
- Close other resource-intensive applications
- Reduce video resolution in the code if needed
- Ensure your computer meets the minimum requirements
- Disable the visualization option if using it
- Consider reducing max_positions in the code to maintain shorter trails

Issue: No window appears when running main.py
Solution:
- Check if there are any error messages in the console
- Verify OpenCV installation: pip install opencv-python --force-reinstall
- Ensure your display drivers are up-to-date
- Try running a simpler OpenCV script to verify basic functionality

Issue: Hand detection is not working properly
Solution:
- Make sure your hands are clearly visible in the frame
- Ensure adequate lighting (avoid backlighting)
- Position your hand at an appropriate distance from the camera
- Try different hand poses more slowly
- Avoid rapid movements until tracking is established

Issue: Incorrect gesture recognition
Solution:
- Make sure your hand is clearly visible
- Try to form the gesture more deliberately
- Check if your background is causing interference
- Ensure your hand is well-lit and not in shadows
- Try adjusting your hand's orientation

====================
7. GESTURES SUPPORTED
====================

The system can now recognize the following gestures for each hand:

Basic Gestures:
- Fist: All fingers closed
- Open Hand: All fingers except thumb extended
- Peace Sign: Only index and middle fingers extended
- Thumbs Up: Only thumb extended
- Thumbs Down: Inverse position of thumbs up
- Pointing: Index finger extended (with or without thumb)

Advanced Gestures:
- Three Fingers: Index, middle, and ring extended
- Four Fingers: All five fingers extended (including thumb)
- OK Sign: Thumb and index form a circle, others extended
- Rock On: Index and pinky extended, others closed
- Pinky Promise: Only pinky extended
- Phone Call: Thumb and pinky extended (like a phone)
- Spider-Man: Thumb, index, and pinky extended (web shooter)
- Gun: Thumb and index extended, others closed
- L Shape: Thumb and index form an L shape

Custom Combinations:
- For unrecognized hand poses, the system displays which specific fingers are extended

====================
8. FUTURE IMPROVEMENTS
====================

Planned enhancements for future versions:
- Gesture-based control system for applications
- Support for custom gesture training
- Improved tracking in challenging lighting conditions
- Support for tracking more than two hands
- Integration with machine learning for personalized gesture recognition
- 3D hand pose estimation

====================
9. CONTACT & SUPPORT
====================

For additional support, please refer to the README.md file or submit an issue on the project repository.

Enjoy using the Hand Recognition System! 